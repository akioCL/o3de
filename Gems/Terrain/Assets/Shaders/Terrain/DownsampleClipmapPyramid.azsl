/*
 * Copyright (c) Contributors to the Open 3D Engine Project.
 * For complete copyright and license terms please see the LICENSE at the root of this distribution.
 *
 * SPDX-License-Identifier: Apache-2.0 OR MIT
 *
 */
#include <Atom/Features/SrgSemantics.azsli>

ShaderResourceGroup PassSrg : SRG_PerPass
{
    Texture2D<float4> m_inputTexture;
    RWTexture2D<float4> m_outputTexture;
}

[numthreads(8,8,1)]
void MainCS(
    uint3 dispatchThreadID : SV_DispatchThreadID, 
    uint3 groupID : SV_GroupID, 
    uint groupIndex : SV_GroupIndex)
{
    uint2 upsampleCoord00 = dispatchThreadID.xy * 2;
    uint2 upsampleCoord01 = upsampleCoord00 + uint2(1, 0);
    uint2 upsampleCoord10 = upsampleCoord00 + uint2(0, 1);
    uint2 upsampleCoord11 = upsampleCoord00 + uint2(1, 1);

    PassSrg::m_outputTexture[dispatchThreadID.xy] = 
        (PassSrg::m_inputTexture[upsampleCoord00]
        +PassSrg::m_inputTexture[upsampleCoord01]
        +PassSrg::m_inputTexture[upsampleCoord10]
        +PassSrg::m_inputTexture[upsampleCoord11]) * 0.25;
}
