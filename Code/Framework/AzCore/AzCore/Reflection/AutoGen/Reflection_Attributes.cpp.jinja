{#
Copyright (c) Contributors to the Open 3D Engine Project.
For complete copyright and license terms please see the LICENSE at the root of this distribution.

SPDX-License-Identifier: Apache-2.0 OR MIT

#}


{% macro __find_and_print_attribute_value(field)    -%}
{%  set ns = namespace(found=false)                 -%}
{%  if field.attrib['value']                        -%}
{{ '"' ~ field.attrib['value'] ~ '"' -}}
{%      set ns.found = true                         -%}
{%  else                                            -%}
{%      for child in field                          -%}
{%          if child.tag == "Value"                 -%}
{{ child.text -}}
{%              set ns.found = true                 -%}
{%          endif                                   -%}
{%      endfor                                      -%}
{%  endif                                           -%}
{%  if not ns.found                                 -%}
/* Attribute found, but not a value. */
{%-  endif                                          -%}
{% endmacro                                         -%}


{% macro PrintAttribute(holder, group, name, default)                                               -%}
{% set ns = namespace(found=false)                                                                  -%}
{% for field in holder                                                                              -%}
{%  if field.tag == "Attribute" and field.attrib['group'] == group and field.attrib['name'] == name -%}
{%      set ns.found = true                                                                         -%}
{{ __find_and_print_attribute_value(field) -}}
{%  endif                                                                                           -%}
{% endfor                                                                                           -%}
{% if not ns.found                                                                                  -%}
{{ default -}}
{% endif                                                                                            -%}
{% endmacro                                                                                         -%}


{% macro ListAttribute(holder, group, name)                                                         -%}
{% for field in holder                                                                              -%}
{%  if field.tag == "Attribute" and field.attrib['group'] == group and field.attrib['name'] == name -%}
{{ caller(name, __find_and_print_attribute_value(field)) }}
{%  endif                                                                                           -%}
{% endfor                                                                                           -%}
{% endmacro                                                                                         -%}


{% macro ListGroupAttributes(holder, group) -%}
{% for field in holder                      -%}
{%  if field.tag == "Attribute"             -%}
{%      if field.attrib['group'] == group   -%}
{{ caller(field.attrib['name'], __find_and_print_attribute_value(field)) }}
{%      endif                               -%}
{%  endif                                   -%}
{% endfor                                   -%}
{% endmacro                                 -%}


{%- macro ListAllAttributes(holder)          -%}
{%- for field in holder                      -%}
{%-  if field.tag == "Attribute"             -%}
{{ caller(field.attrib['group'], field.attrib['name'], __find_and_print_attribute_value(field)) }}
{%-  endif                                   -%}
{%- endfor                                   -%}
{%- endmacro                                 -%}